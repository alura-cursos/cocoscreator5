{"version":3,"sources":["ControleDeAnimacao.js"],"names":["cc","Class","extends","Component","properties","anguloDiagonal","Float","_animacao","Animation","_senoMinimo","_cossenoMinimo","onLoad","getComponent","play","Math","sin","degreesToRadians","cos","mudaAnimacao","direcao","estado","proximaAnimacao","angulo","atan2","y","x","cosseno","abs","seno","getAnimationState","isPlaying"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,wBAAiBL,GAAGM,KADZ;AAERC,mBAAYP,GAAGQ,SAFP;AAGRC,qBAAcT,GAAGM,KAHT;AAIRI,wBAAiBV,GAAGM;;AAJZ,KAHP;;AAWLK,YAAQ,kBAAY;AAChB,aAAKJ,SAAL,GAAiB,KAAKK,YAAL,CAAkBZ,GAAGQ,SAArB,CAAjB;AACA,aAAKD,SAAL,CAAeM,IAAf,CAAoB,YAApB;;AAIA,aAAKJ,WAAL,GAAmBK,KAAKC,GAAL,CAASf,GAAGgB,gBAAH,CAAoB,KAAKX,cAAzB,CAAT,CAAnB;AACA,aAAKK,cAAL,GAAsBI,KAAKG,GAAL,CAASjB,GAAGgB,gBAAH,CAAoB,KAAG,KAAKX,cAA5B,CAAT,CAAtB;AACH,KAnBI;;AAqBLa,kBAAe,sBAASC,OAAT,EAAkBC,MAAlB,EAAyB;AACpC,YAAIC,kBAAkBD,MAAtB;;AAEA,YAAIE,SAASR,KAAKS,KAAL,CAAWJ,QAAQK,CAAnB,EAAsBL,QAAQM,CAA9B,CAAb;;AAEA,YAAIC,UAAUZ,KAAKG,GAAL,CAASK,MAAT,CAAd;AACAI,kBAAUZ,KAAKa,GAAL,CAASD,OAAT,CAAV;;AAEA,YAAIE,OAAOd,KAAKC,GAAL,CAASO,MAAT,CAAX;AACAM,eAAOd,KAAKa,GAAL,CAASC,IAAT,CAAP;;AAEA,YAAGF,UAAU,KAAKhB,cAAlB,EAAiC;AAC7B,gBAAGS,QAAQM,CAAR,GAAY,CAAf,EAAiB;AACbJ,mCAAmB,SAAnB;AACH,aAFD,MAEM,IAAGF,QAAQM,CAAR,GAAY,CAAf,EAAiB;AACnBJ,mCAAmB,UAAnB;AACH;AACJ;;AAED,YAAGO,OAAO,KAAKnB,WAAf,EAA2B;AACvB,gBAAGU,QAAQK,CAAR,GAAY,CAAf,EAAiB;AACbH,mCAAmB,MAAnB;AACH,aAFD,MAEM,IAAGF,QAAQK,CAAR,GAAY,CAAf,EAAiB;AACnBH,mCAAmB,OAAnB;AACH;AACJ;;AAED,YAAG,CAAC,KAAKd,SAAL,CAAesB,iBAAf,CAAiCR,eAAjC,EAAkDS,SAAtD,EAAgE;AAC5D,iBAAKvB,SAAL,CAAeM,IAAf,CAAoBQ,eAApB;AACH;AACJ;;AAnDI,CAAT","file":"ControleDeAnimacao.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        anguloDiagonal : cc.Float,\n        _animacao : cc.Animation,\n        _senoMinimo : cc.Float,\n        _cossenoMinimo : cc.Float,\n        \n    },\n\n    onLoad: function () {\n        this._animacao = this.getComponent(cc.Animation);\n        this._animacao.play(\"AndarBaixo\");\n        \n        \n        \n        this._senoMinimo = Math.sin(cc.degreesToRadians(this.anguloDiagonal));\n        this._cossenoMinimo = Math.cos(cc.degreesToRadians(90-this.anguloDiagonal));\n    },\n\n    mudaAnimacao : function(direcao, estado){\n        let proximaAnimacao = estado;\n        \n        let angulo = Math.atan2(direcao.y, direcao.x);\n        \n        let cosseno = Math.cos(angulo);\n        cosseno = Math.abs(cosseno);\n        \n        let seno = Math.sin(angulo);\n        seno = Math.abs(seno);\n        \n        if(cosseno > this._cossenoMinimo){\n            if(direcao.x > 0){\n                proximaAnimacao += \"Direita\";\n            }else if(direcao.x < 0){\n                proximaAnimacao += \"Esquerda\";\n            }\n        }\n        \n        if(seno > this._senoMinimo){\n            if(direcao.y > 0){\n                proximaAnimacao += \"Cima\";\n            }else if(direcao.y < 0){\n                proximaAnimacao += \"Baixo\";\n            }\n        }\n\n        if(!this._animacao.getAnimationState(proximaAnimacao).isPlaying){\n            this._animacao.play(proximaAnimacao);\n        }\n    }\n\n});\n"]}