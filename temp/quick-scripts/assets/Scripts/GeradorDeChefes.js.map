{"version":3,"sources":["GeradorDeChefes.js"],"names":["cc","Class","extends","Component","properties","chefePrefab","Prefab","alvo","Node","tempoParaGerar","Float","_pontos","default","type","onLoad","director","getScene","on","adicionarPontoALista","schedule","gerar","evento","ponto","getUserData","node","push","escolhePontoMaisDistante","chefe","instantiate","parent","position","maiorDistanciaCalculada","pontoMaisDistante","i","length","pontoAtual","vetorDistancia","sub","distancia","mag"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,qBAAaL,GAAGM,MADR;AAERC,cAAOP,GAAGQ,IAFF;AAGRC,wBAAiBT,GAAGU,KAHZ;AAIRC,iBAAQ;AACJC,qBAAQ,EADJ;AAEJC,kBAAMb,GAAGQ;AAFL;AAJA,KAHP;;AAcLM,YAAQ,kBAAY;AAChBd,WAAGe,QAAH,CAAYC,QAAZ,GAAuBC,EAAvB,CAA0B,4BAA1B,EAAwD,KAAKC,oBAA7D,EAAmF,IAAnF;AACA,aAAKC,QAAL,CAAc,KAAKC,KAAnB,EAA0B,KAAKX,cAA/B;AACH,KAjBI;;AAmBLS,0BAAuB,8BAASG,MAAT,EAAgB;AACnC,YAAIC,QAAQD,OAAOE,WAAP,GAAqBC,IAAjC;AACA,aAAKb,OAAL,CAAac,IAAb,CAAkBH,KAAlB;AACH,KAtBI;;AAwBLF,WAAQ,iBAAU;AACd,YAAIE,QAAQ,KAAKI,wBAAL,EAAZ;AACA,YAAIC,QAAQ3B,GAAG4B,WAAH,CAAe,KAAKvB,WAApB,CAAZ;AACAsB,cAAME,MAAN,GAAeP,MAAMO,MAArB;AACAF,cAAMG,QAAN,GAAiBR,MAAMQ,QAAvB;AACH,KA7BI;;AAgCLJ,8BAA2B,oCAAU;;AAEjC,YAAIK,0BAA0B,CAA9B;AACA,YAAIC,oBAAoB,KAAKrB,OAAL,CAAa,CAAb,CAAxB;AACA,aAAI,IAAIsB,IAAE,CAAV,EAAaA,IAAE,KAAKtB,OAAL,CAAauB,MAA5B,EAAqCD,GAArC,EAAyC;AACrC,gBAAIE,aAAa,KAAKxB,OAAL,CAAasB,CAAb,CAAjB;AACA,gBAAIG,iBAAiBD,WAAWL,QAAX,CAAoBO,GAApB,CAAwB,KAAK9B,IAAL,CAAUuB,QAAlC,CAArB;AACA,gBAAIQ,YAAYF,eAAeG,GAAf,EAAhB;AACA,gBAAGD,YAAYP,uBAAf,EAAuC;AACnCA,0CAA0BO,SAA1B;AACAN,oCAAoBG,UAApB;AACH;AAEJ;;AAED,eAAOH,iBAAP;AACH;;AAhDI,CAAT","file":"GeradorDeChefes.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        chefePrefab: cc.Prefab,\r\n        alvo : cc.Node,\r\n        tempoParaGerar : cc.Float,\r\n        _pontos:{\r\n            default:[],\r\n            type: cc.Node\r\n        }\r\n    },\r\n\r\n\r\n    onLoad: function () {\r\n        cc.director.getScene().on(\"adicionarAoGeradorDeChefes\", this.adicionarPontoALista, this);\r\n        this.schedule(this.gerar, this.tempoParaGerar);\r\n    },\r\n    \r\n    adicionarPontoALista : function(evento){\r\n        let ponto = evento.getUserData().node;\r\n        this._pontos.push(ponto);\r\n    },\r\n\r\n    gerar : function(){\r\n        let ponto = this.escolhePontoMaisDistante();\r\n        let chefe = cc.instantiate(this.chefePrefab);\r\n        chefe.parent = ponto.parent;\r\n        chefe.position = ponto.position;\r\n    },\r\n    \r\n    \r\n    escolhePontoMaisDistante : function(){\r\n        \r\n        let maiorDistanciaCalculada = 0;\r\n        let pontoMaisDistante = this._pontos[0];\r\n        for(let i=0; i<this._pontos.length ; i++){\r\n            let pontoAtual = this._pontos[i];\r\n            let vetorDistancia = pontoAtual.position.sub(this.alvo.position);\r\n            let distancia = vetorDistancia.mag();\r\n            if(distancia > maiorDistanciaCalculada){\r\n                maiorDistanciaCalculada = distancia;\r\n                pontoMaisDistante = pontoAtual;\r\n            }\r\n            \r\n        }\r\n        \r\n        return pontoMaisDistante;\r\n    }\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n\r\n\r\n});\r\n"]}